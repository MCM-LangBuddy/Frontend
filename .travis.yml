language: android
sudo: required
jdk: oraclejdk8
notifications:
  email: false
env:
  global:
  - ANDROID_API_LEVEL=29
  - ANDROID_BUILD_TOOLS_VERSION=29.0.2
  - ANDROID_ABI=armeabi-v7a
  - secure: UC2GpFq+ocsgiph2JfK07qZjm2XrgPWqlAn2Elbznc0wBqTX6WvImDDXIv1xKr6iAjofo17U7Yj4Wup9MFUQ/O+pECuYQ/6nS2W58j/nFqr2f8rp0YmowJax9R7WzIqC3QTdIGkCdXg4V3Q4h7/yVUQ/TIgbZY//z3BkE/7sM19rtlvHM5YvzcGBmfaZ+BwA5h1sjqtlutl7MjvnTicQAlWo8rmzLpzOx5DC16569POShfVEOLNAuFsEGfnbsBYcytqaiLD6Q9GvLvS5z4q+SPHXQYLPeoBztBkR+CDeHhm9ELorH1T2sxN+oYMNjlk1vXTS5PEYqaxyaMbxMD/iBYGgDJRaTfKgj+fGXirHBFhBsHJfdQbEoe9SiVyzgCOHptrj4V2WVaxPc0BXVgLsW1djlbTZ+H7V/arVuagiHPbxHUmX+5nZ8M8IO5MVkkbNyBvrOZqdDjFeRrdmbZqzctMpTN3ZGauZiTKEL7mjeOJPZUDseVSkojfU0RNAtcwSAEORUiQmVhU5DZnTNTqiM9idfjoCeeRQwyAnSJdlaQAFWA5e73x6MUZOCcNjHN2RDRvDY4IO+9TTvF1EToHFAYYj9f/w65lBHxpsTvQ7y8Yen2WJwZjlRfmX3w1b16nnGPhfRJrmbAOwFfJOBoZIRKavI1twtExpf72Tg+T9WpQ=
android:
  components:
  - tools
  - build-tools-$ANDROID_BUILD_TOOLS_VERSION
  - android-$ANDROID_API_LEVEL
  - extra-android-m2repository
  licenses:
  - android-sdk-preview-license-52d11cd2
  - android-sdk-license-.+
  - google-gdk-license-.+
before_cache:
- rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
- rm -fr $HOME/.gradle/caches/*/plugin-resolution/
cache:
  directories:
  - "$HOME/.gradle/caches/"
  - "$HOME/.gradle/wrapper/"
  - "$HOME/.android/build-cache"
before_script:
- chmod +x gradlew
script:
- "./gradlew clean build"
- "./gradlew test"
- "./gradlew assembleRelease"
deploy:
  provider: releases
  skip_cleanup: true
  overwrite: true
  api_key:
    secure: oVvKZhQGC9fhquSLNuYclzH7XdZusVclYJBNHc4MUHkcUJTcTZdQHb1NYFGeaWH1BXvQ9Po58bhpJefHLqMeWvy3/6yyLYPXCQMvT4b7Xi3rkinNVjvoM/RaYHun9R6BAxK/mw8mIC9uVTJHD4jj/rLQsG4Jq/ZEDJyKA8SeHLmDxS82u/1nhDVNZrxd1nMdribkkrxUnsOy2ErH4gJv8O+nbQS3w8JJry26zkh13EKovPrSBe3ogmIlF3gYRZuBbpMAoTYeSQ1uPAapMJEwqIdyeBasTyFmU29Qec3OG/Ud4MB3tK3FF3IFTjygM6SNO4MLn5x8VLnSlthlou9BOXXogqpg5smF1N91/bSWuiDfiRH1nqBX9k7sLy4UjCOaGfP74YAOF8GWHtYVEC2UOvWS4KtZX46gq6ejFibl4gRvtjqLYemBb5M/aczSjJXRMFXOx/X8zxpJ8Dx4K2ioyFqraaFhdyIm5Be3JQmwDr7GfkTapwnbV1ru3UPiXoRdfYgh9yxnSeehUES1m73Fsd29IWlHYZfhCFBF7wOgI5z7P3mKEVPpt/Xx9TBOnoZrS3PhabuG6BmSRhIfPd3s2j6U8YH5Pu/DRANBqJuK7+YlFtEBOP8txUuYzLDU0lLDGyOK/EzIm1jguxUMVfhk5OlracL/3kOeMETXP7+VCw8=
  file_glob: true
  file: "/home/travis/build/ValCanBuild/Frontend/app/build/outputs/apk/release/*"
  on:
    repo: ValCanBuild/TravisAndroidExample
    tags: true
before_install:
  openssl aes-256-cbc -k "$super_secret_password" -in keystoreLangBuddy.jks.enc -out keystoreLangBuddy.jks -d
